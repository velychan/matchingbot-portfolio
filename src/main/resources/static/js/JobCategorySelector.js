
import React, { useState } from "https://cdn.jsdelivr.net/npm/react@18.2.0/+esm";
import { createRoot } from "https://cdn.jsdelivr.net/npm/react-dom@18.2.0/client/+esm";

const jobData = {
  "기획·전략": ["경영·비즈니스기획", "웹기획", "마케팅기획", "PL·PM·PO", "컨설턴트", "CEO·COO·CTO", "AI기획자", "AI사업전략"],
  "법무·사무·총무": ["경영지원", "사무담당자", "총무", "사무보조", "법무담당자", "비서", "변호사", "법무사", "변리사", "노무사", "AI윤리전문가"],
  "인사·HR": ["인사담당자", "HRD·HRM", "노무관리자", "잡매니저", "헤드헌터", "직업상담사"],
  "회계·세무": ["회계담당자", "경리", "세무담당자", "재무담당자", "감사", "IR·공시", "회계사", "세무사", "관세사"],
  "마케팅·광고·MD": ["AE(광고기획자)", "브랜드마케터", "퍼포먼스마케터", "CRM마케터", "온라인마케터", "콘텐츠마케터", "홍보", "설문·리서치", "MD", "카피라이터", "크리에이티브디렉터", "채널관리자", "그로스해커"],
  "AI·개발·데이터": ["백엔드개발자", "프론트엔드개발자", "웹개발자", "앱개발자", "시스템엔지니어", "네트워크엔지니어", "DBA", "데이터엔지니어", "데이터사이언티스트", "보안엔지니어", "소프트웨어개발자", "게임개발자", "하드웨어개발자", "AI/ML엔지니어", "블록체인개발자", "클라우드엔지니어", "웹퍼블리셔", "IT컨설팅", "QA", "AI/ML연구원", "데이터분석가", "데이터라벨러", "프롬프트엔지니어", "AI보안전문가", "MLOps엔지니어", "AI서비스개발자"],
  "디자인": ["그래픽디자이너", "3D디자이너", "제품디자이너", "산업디자이너", "광고디자이너", "시각디자이너", "영상디자이너", "웹디자이너", "UI·UX디자이너", "패션디자이너", "편집디자이너", "실내디자이너", "공간디자이너", "캐릭터디자이너", "환경디자이너", "아트디렉터", "일러스트레이터"],
  "물류·무역": ["물류관리자", "구매관리자", "자재관리자", "유통관리자", "무역사무원"],
  "운전·운송·배송": ["납품·배송기사", "배달기사", "수행·운전기사", "화물·중장비기사", "버스기사", "택시기사", "조종·기관사"],
  "영업": ["제품영업", "서비스영업", "해외영업", "광고영업", "금융영업", "법인영업", "IT·기술영업", "영업관리", "영업지원"],
  "고객상담·TM": ["인바운드상담원", "아웃바운드상담원", "고객센터관리자"],
  "금융·보험": ["금융사무", "보험설계사", "손해사정사", "심사", "은행원·텔러", "계리사", "펀드매니저", "애널리스트"],
  "식·음료": ["요리사", "조리사", "제과제빵사", "바리스타", "셰프·주방장", "카페·레스토랑매니저", "홀서버", "주방보조", "소믈리에·바텐더", "영양사", "식품연구원", "푸드스타일리스트"],
  "고객서비스·리테일": ["설치·수리기사", "정비기사", "호텔종사자", "여행에이전트", "매장관리자", "뷰티·미용사", "애견미용·훈련", "안내데스크·리셉셔니스트", "경호·경비", "운영보조·매니저", "이벤트·웨딩플래너", "주차·주유원", "스타일리스트", "장례지도사", "가사도우미", "승무원", "플로리스트"],
  "엔지니어링·설계": ["전기·전자엔지니어", "기계엔지니어", "설계엔지니어", "설비엔지니어", "반도체엔지니어", "화학엔지니어", "공정엔지니어", "하드웨어엔지니어", "통신엔지니어", "RF엔지니어", "필드엔지니어", "R&D·연구원", "AI로봇엔지니어"],
  "교육": ["유치원·보육교사", "학교·특수학교교사", "대학교수·강사", "학원강사", "외국어강사", "기술·전문강사", "학습지·방문교사", "학원상담·운영", "교직원·조교", "교재개발·교수설계", "AI교육컨설턴트"],
  "건축·시설": ["건축가", "건축기사", "시공기사", "전기기사", "토목기사", "시설관리자", "현장관리자", "안전관리자", "공무", "소방설비", "현장보조", "감리원", "도시·조경설계", "환경기사", "비파괴검사원", "공인중개사", "감정평가사", "분양매니저"],
  "의료·바이오": ["의사", "한의사", "간호사", "간호조무사", "약사·한약사", "의료기사", "수의사", "수의테크니션", "병원코디네이터", "원무행정", "기타의료종사자", "의료·약무보조", "바이오·제약연구원", "임상연구원"],
  "미디어·문화·스포츠": ["PD·감독", "포토그래퍼", "영상편집자", "사운드엔지니어", "스태프", "출판·편집", "배급·제작자", "콘텐츠에디터", "크리에이터", "기자", "작가", "아나운서", "리포터·성우", "MC·쇼호스트", "모델", "연예인·매니저", "인플루언서", "통번역사", "큐레이터", "음반기획", "스포츠강사", "AI콘텐츠크리에이터"],
  "공공·복지": ["사회복지사", "요양보호사", "환경미화원", "보건관리자", "사서", "자원봉사자", "방역·방재기사"]
};

const detailMap = {
  "경영·비즈니스기획": ["사업기획", "전략기획", "경영기획", "신사업기획", "데이터분석", "브랜드기획", "연구기획", "재무기획", "문화기획"],
  "웹기획": ["서비스기획", "UI·UX기획", "콘텐츠기획", "앱기획", "데이터분석", "스토리보드", "제안·컨설팅", "게임기획"],
  "마케팅기획": ["전략기획", "시장분석", "시장조사", "브랜드기획", "데이터분석", "콘텐츠기획"],
  "인사담당자": ["인사행정", "인사기획", "인사교육"],
  "HRD·HRM": ["면접·채용", "평가·보상", "급여관리", "교육기획", "조직문화", "복리후생"],
  "PL·PM·PO": ["PM", "PL", "PO"],
  "CEO·COO·CTO": ["COO", "CTO", "CEO", "CMO", "CFO"],
  "컨설턴트": ["경영컨설팅", "경영기획", "금융컨설팅", "M&A", "창업컨설팅", "HR컨설팅", "웹컨설팅", "이미지컨설팅", "IPO"],
  "경영지원":["문서작성","경영기획","자료조사","통계·분석"],
  "사무담당자":["문서관리","문서작성","전산입력","행정","서무","사이트관리","자료조사","송무담당"],
  "총무":["문서관리","비품관리","행정","자산관리","서무","복리후생"],
  "사무보조":["문서작성","문서관리","전산입력","사이트관리","자산관리","더존"],
  "법무담당자":["소송·민사·등기","컴플라이언스","문서작성","사내변호사","지적재산권","특허담당","저작권","공증"],
  "비서":["임원비서","수행비서","송무비서"],
  "변호사":["사내변호사","컴플라이언스","소송·민사·등기","지적재산권","송무담당","저작권","상표담당","특허담당","공증"],
  "법무사":["송무담당","지적재산권","저작권","특허담당","상표담당","공증"],
  "노무관리자": ["노사관리", "인사교육", "경력관리", "복리후생"],
  "잡매니저": ["인재관리", "인재발굴", "채용대행", "파견관리"],
  "헤드헌터": ["인재발굴", "인재컨설팅", "스카우트", "인재관리", "채용대행"],
  "직업상담사": ["취업상담", "직업훈련", "경력관리", "회원관리"],
  "회계담당자": ["결산", "재무회계", "법인결산", "관리회계", "부가세신고", "전표입력", "더존", "전산회계", "4대보험", "계산서발행", "원가회계", "기업회계", "회계감사", "ERP운용", "CFO"],
  "경리": ["계산서발행", "전표입력", "급여관리", "부가세신고", "결산", "4대보험", "ERP운용", "더존"],
  "세무담당자": ["세무신고", "부가세신고", "세무기장", "세무조정", "연말정산"],
  "재무담당자": ["재무회계", "자금관리", "결산", "재무기획", "재무분석", "입출금관리", "외환관리"],
  "감사": ["내부감사", "회계감사", "외부감사"],
  "IR·공시": ["재무분석", "재무기획", "IPO", "결산", "통계·분석"],
  "회계사": ["재무회계", "기업회계", "관리회계", "원가회계", "회계감사"],
  "세무사": ["세무신고", "세무조정", "세무기장", "부가세신고", "연말정산"],
  "관세사": ["수출입관리", "통관", "관세환급"],
  "AE(광고기획자)": ["광고기획", "시장분석", "브랜딩", "브랜드기획", "시장조사", "포지셔닝", "광고PD", "PPL"],
  "브랜드마케터": ["브랜딩", "시장분석", "이벤트기획", "기업홍보", "언론홍보", "라이센싱"],
  "퍼포먼스마케터": ["SNS마케팅", "키워드광고", "카페·블로그관리"],
  "CRM마케터": ["고객관리", "매출관리", "프로모션"],
  "온라인마케터": ["SNS마케팅", "바이럴마케팅", "디지털마케팅", "키워드광고", "프로모션", "제휴마케팅", "배너광고", "IMC", "SEO"],
  "콘텐츠마케터": ["콘텐츠기획", "SNS마케팅", "영상제작", "SEO"],
  "홍보": ["기업홍보", "프로모션", "이벤트기획", "오프라인마케팅", "언론홍보", "BTL", "옥외광고"],
  "설문·리서치": ["시장조사", "통계·분석", "시장분석", "설문조사"],
  "MD": ["상품기획", "매출관리", "상품입출고", "리테일MD", "재고관리", "AMD", "식품MD", "VMD"],
  "채널관리자": ["SNS마케팅", "매체관리", "프로모션", "카페·블로그관리"],
  "백엔드개발자": ["서버관리", "SI개발", "클라이언트", "HTTP", "핀테크"],
  "프론트엔드개발자": ["인터페이스", "반응형웹", "GUI"],
  "앱개발자": ["SI개발", "인터페이스", "증강현실", "가상현실", "핀테크", "챗봇", "메타버스", "음성인식", "암호화폐"],
  "시스템엔지니어": ["시스템운영", "시스템설계", "서버관리", "네트워크관리", "서버구축", "시스템분석", "SI개발", "펌웨어"],
  "네트워크엔지니어": ["네트워크관리", "시스템운영", "서버구축"],
  "DBA": ["데이터관리", "DBMS", "데이터마이닝", "DB튜닝", "모델링", "DW모델러", "OLAP개발자"],
  "변리사": ["특허담당","지적재산권","출원","상표담당","저작권"],
  "노무사": ["4대보험","급여관리","노사관리"],
  "데이터엔지니어": ["빅데이터","데이터파이프라인","데이터레이크","ETL"],
  "데이터사이언티스트": ["데이터분석","분석모델링","데이터시각화","BI"],
  "보안엔지니어": ["정보보안","보안관제","네트워크관리","방화벽","핀테크","암호화폐"],
  "소프트웨어개발자": ["시스템설계","SI개발","시스템분석","아키텍처","클라이언트","정보보안"],
  "게임개발자": ["클라이언트","MMORPG","모델링","가상현실","메타버스","증강현실"],
  "하드웨어개발자": ["회로설계","시스템설계","펌웨어","시스템분석","검증"],
  "AI/ML엔지니어": ["인공지능","딥러닝","모델링","자연어처리(NLP)","이미지프로세싱","챗봇","음성인식"],
  "블록체인개발자": ["스마트컨트랙트","Dapp","암호화폐","DID"],
  "클라우드엔지니어": ["클라우드아키텍트","솔루션스아키텍트","클라우드개발자","네트워크관리"],
  "웹퍼블리셔": ["웹표준·웹접근성","반응형웹","GUI","웹마스터"],
  "QA": ["테스터","검증","웹마스터"],
  "그래픽디자이너": ["2D디자인","디지털디자인","삽화·일러스트","모션그래픽","Sign디자인","CG","POP","CI","애니메이션","원화디자인","아바타디자인"],
  "3D디자이너": ["디지털디자인","모션그래픽","애니메이션","CG","삽화·일러스트","아바타디자인","원화디자인","만화디자인"],
  "제품디자이너": ["패키지디자인","잡화디자인","2D디자인","악세사리디자인","공업디자인","문구디자인","팬시디자인","가구디자인","주얼리디자인","공예디자인","금속디자인"],
  "산업디자이너": ["잡화디자인","가구디자인","문구디자인","Sign디자인","금속디자인","악세사리디자인","공예디자인","팬시디자인","주얼리디자인"],
  "광고디자이너": ["디지털디자인","브랜드디자인","전단지디자인","정보디자인","옥외광고","현수막디자인","Sign디자인","POP","CI"],
  "시각디자이너": ["브랜드디자인","디지털디자인","패키지디자인","정보디자인","전단지디자인","POP","Sign디자인","삽화·일러스트","현수막디자인","폰트디자인"],
  "영상디자이너": ["영상제작","모션그래픽","2D디자인","CG","애니메이션"],
  "웹디자이너": ["모바일디자인","UI·UX기획","GUI"],
  "UI·UX디자이너": ["UI·UX기획","모바일디자인","GUI"],
  "패션디자이너": ["의상디자인","여성캐주얼디자인","잡화디자인","섬유디자인","남성캐주얼디자인","VMD","패턴사","골프웨어디자인","홈패션디자인","악세사리디자인","아동복디자인","주얼리디자인"],
  "편집디자이너": ["북디자인","삽화·일러스트","정보디자인","교재디자인","맥디자인","폰트디자인","IBM디자인"],
  "실내디자이너": ["인테리어디자인","전시디자인","가구디자인"],
  "공간디자이너": ["인테리어디자인","전시디자인","무대디자인","조경디자인"],
  "캐릭터디자이너": ["애니메이션","2D디자인","만화디자인","삽화·일러스트","모션그래픽","원화디자인","아바타디자인"],
  "환경디자이너": ["공공디자인","조경디자인","경관디자인"],
  "일러스트레이터": ["삽화·일러스트","만화디자인","애니메이션","원화디자인"],
  "물류관리자": ["재고관리","창고관리","물류센터","납품"],
  "구매관리자": ["자재구매","구매계약","외자구매"],
  "자재관리자": ["재고관리","상품입출고","자재구매","외자구매"],
  "유통관리자": ["상품입출고","납품","배차","외주관리","보세운송"],
  "무역사무원": ["수출입관리","포워딩","오더관리","국제무역","수출입계약","통관","해상무역","항공무역","바이어개발","무역중개인","관세사무","통관대리인","외환관리","검수사","보세사"],
  "납품·배송기사": ["납품기사","배송기사","택배","운송보조","적재·하역","배차"],
  "배달기사": ["운송보조","퀵서비스","음식배달"],
  "수행·운전기사": ["운전기사","수행기사","승용기사","대리운전","발레파킹"],
  "화물·중장비기사": ["화물차운전","지게차운전","중장비운전","굴삭기"],
  "조종·기관사": ["해상운송","육상운송","항공운송"],
  "제품영업": ["국내영업","장비영업","식품영업","의료기기영업","자동차영업","화장품영업","제약영업","종고차딜러","휴대전화영업","주류영업"],
  "서비스영업": ["부동산영업","유통영업","납품영업","렌탈영업","상조영업"],
  "해외영업": ["영어","해외마케팅","바이어개발","수출입계약","중국어","일본어","기타외국어"],
  "광고영업": ["온라인영업","오프라인영업","키워드광고","기업홍보","프로모션","배너광고","옥외광고"],
  "금융영업": ["보험영업","법인고객영업","재무상담","자산관리","투자상담·자문","여신상담","카드영업","방카슈랑스","퇴직연금","PB"],
  "법인영업": ["거래처관리","납품영업","가맹영업","장비영업","식품영업","제약영업","상조영업","주류영업"],
  "IT·기술영업": ["기술영업","솔루션영업","기술지원","시스템영업","네트워크영업","하드웨어영업","반도체영업","웹사이트구축영업"],
  "영업관리": ["거래처관리","고객관리","거래선개발관리","대리점관리","가맹점관리"],
  "영업지원": ["매출관리","영업기획","영업전략","데이터분석"],
  "인바운드상담원": ["고객지원","전화상담","단순안내","접수·예약","온라인상담","게시판관리","채팅상담","고객경험관리","금융상담","A·S상담","이메일상담","민원상담","교환·반품","기술상담","대출상담","원격상담","배송상담","방문상담","해지방어"],
  "아웃바운드상담원": ["전화상담","텔레마케팅","회원관리","해피콜"],
  "고객센터관리자": ["고객문의분석","고객경험관리","상담품질관리","CS교육","콜통계분석","통화품질분석"],
  "금융사무": ["고객관리","거래처관리","채권","입출금관리","금융상품기획","외환관리","퇴직연금"],
  "보험설계사": ["보험영업","보험상담","보험사고"],
  "손해사정사": ["보험청구","손해평가","언더라이팅"],
  "심사": ["채권","대출심사","보상","투자심사","손해평가"],
  "은행원·텔러": ["채권","여신상담","재무상담","PB","방카슈랑스","외환관리","퇴직연금"],
  "펀드매니저": ["자산운용","투자상담·자문","채권","위험분석·관리"],
  "애널리스트": ["투자상담·자문","위험분석·관리","자산운용","재무분석"],
  "요리사": ["양식","한식","일식","메뉴개발","중식","호텔"],
  "조리사": ["양식","한식","일식","단체급식","메뉴개발","중식","호텔"],
  "제과제빵사": ["베이커리","제빵사","파티쉐","메뉴개발"],
  "바리스타": ["베이커리","메뉴개발","호텔"],
  "셰프·주방장": ["양식","한식","메뉴개발","일식","호텔","중식","단체급식"],
  "카페·레스토랑매니저": ["카운터","서빙","양식","베이커리","메뉴개발","호텔","한식","일식","중식"],
  "홀서버": ["서빙","카운터","양식","한식","호텔","일식","중식","베이커리"],
  "주방보조": ["한식","양식","일식","단체급식","중식","호텔"],
  "소믈리에·바텐더": ["소믈리에","바텐더","메뉴개발"],
  "영양사": ["단체급식","식단관리","메뉴개발"],
  "설치·수리기사": ["A·S수리","유지보수","설치","기술지원"],
  "정비기사": ["자동차정비","A·S수리","기술지원","자동차튜닝","썬팅"],
  "호텔종사자": ["프런트","호텔리어","호텔사무","컨시어지","하우스키핑","카지노","벨맨"],
  "여행에이전트": ["고객은대","여행사무","예약·발권","고객안내","여행상품기획","항공사무","가이드"],
  "매장관리자": ["고객응대","판매관리","재고관리","매출관리","판매영업","고객안내","잡화판매","진열관리","의류판매","샵마스터","캐셔","식품만매","화장품판매","가구판매","가전판매","VMD","방문판매","컴퓨터기기판매"],
  "뷰티·미용사": ["피부관리","체형관리","마사지","메이크업","헤어디자인","네일아트"],
  "애견미용·훈련": ["애견관리","애견훈련","애견미용"],
  "안내데스크·리셉셔니스트": ["고객응대","고객안내","프런트","컨시어지"],
  "경호·경비": ["보안","경비","순찰","경호","안전요원","방범","현금호송","교통관제"],
  "운영보조·매니저": ["고객응대","고객안내","골프","이벤트","프로모터","웨딩","나레이터"],
  "이벤트·웨딩플래너": ["웨딩","이벤트","커플매니저"],
  "주차·주유원": ["주차관리","세차","발레파킹","주차정산","주유"],
  "스타일리스트": ["헤어디자인","메이크업","브랜드디자인"],
  "가사도우미": ["산후조리","육아도우미","입주도우미"],
  "승무원": ["공항지상직","고객응대","고객안내","예약·발권"],
  "전기·전자엔지니어": ["회로설계","자동제어","PLC","펌웨어","PCB","임베디드","메카트로닉스"],
  "기계엔지니어": ["제어·설계","생산기술","기계조작","제품개발","캐드원","자동차","메카트로닉스","금속","플랜트","CAM","로봇설계","조선","무인항공기·드론","철강"],
  "설계엔지니어": ["기구설계","3D설계","2D설계","전기설계","건축설계","금형설계","회로설계","CAM","토목설계","로봇설계"],
  "설비엔지니어": ["유지보수","정보통신","통신설비"],
  "반도체엔지니어": ["디스플레이","제어·설계","회로설계","생산기술","제품개발","PCB","자동화라인","LED·OLED","LCD","정보통신","터치스크린","신소재"],
  "화학엔지니어": ["제품개발","화장품","에너지","플라스틱·PVC","생명공학"],
  "공정엔지니어": ["공정개발","자동화라인","품질테스트","자동제어"],
  "하드웨어엔지니어": ["회로설계","펌웨어","임베디드","PCB"],
  "통신엔지니어": ["정보통신","무선통신","전자통신","CCTV","이동통신","광통신","회로설계","위성통신"],
  "RF엔지니어": ["무선통신","정보통신","통신설비","광통신"],
  "필드엔지니어": ["유지보수","기술지원","설치","기계조작"],
  "R&D·연구원": ["R&D","제품개발","연구·실험·기술","전기·전자","제조·공정","화학·섬유","신소재","반도체·LCD","자동차","정보통신·IT","환경","조선·항공·우주","에너지","로봇설계","생명공학","금속·철강","미생물","건설·교통","경영·경제연구","인문·사회과학","농림·축산연구","목재·제지"],
  "생산직종사자": ["조립","기계조작","설비","금속","사출","회록","밀링","비금속","절단","재단","신소재","연마","절곡","연삭","미싱","제관","패턴사","조향"],
  "생산·공정관리자": ["생산관리","품질보증","HACCP","ISO"],
  "품질관리자": ["품질보증","검증","ISO","환경관리","HACCP"],
  "포장·가공담당자": ["인쇄·출력","코팅","도금","제본","그라인딩"],
  "유치원·보육교사": ["유치원","어린이집","보육교사","놀이방"],
  "학교·특수학교교사": ["중고등학교","방과후교사","영어","초등학교","예체능","기타외국어","중국어","교육콘텐츠개발","특수학교","한국어","일본어","보건교사"],
  "대학교수·강사": ["대학강사","대학교수","입학사정관"],
  "학원강사": ["영어","일반학원","입시학원","예체능","파트강사","한국어","기타외국어","일본어","중국어"],
  "외국어강사": ["영어","기타외국어","일본어","한국어","중국어"],
  "기술·전문강사": ["자격증·기술","직업훈련","예체능"],
  "학습지·방문교사": ["방문교사","학습지교사","과외교사","영어","일본어","중국어"],
  "학원상담·운영": ["학생관리","교육상담","학원운영","일반학원","입시학원","유학상담"],
  "교직원·조교": ["교육행정","조교","대학교","중고등학교","초등학교","특수학교"],
  "교재개발·교수설계": ["교육기획","교육콘텐츠개발","교육진행","교육행정","교재개발","교수설계"],
  "건축가": ["건축설계","캐드원","건축CM","건축감리","리모델링"],
  "건축기사": ["건축설계","건축시공","시공관리","리모델링"],
  "시공기사": ["건축시공","시공관리","전기설비","리모델링","배관·케이블","공조냉동","에어컨","간판·판넬","샤시·창호","리노베이션","단열·외장","장판·타일","도배·벽지","방음·방벽","엘리베이터","미장"],
  "전기기사": ["전기설비","전기배선","통신설비","배관·케이블","엘리베이터"],
  "토목기사": ["토목","측량","상하수도","건축시공","교량설계","가설설계","토목감리","목수"],
  "시설관리자": ["시설점검","전기점검","공조냉동","가스점검"],
  "현장관리자": ["시공관리","건설노무","안전평가"],
  "안전관리자": ["산업안전","건설안전","소방·방재","안전평가","환기"],
  "소방설비": ["소방·방재","산업안전","건설안전","상하수도"],
  "현장보조": ["보수·철거","토목","샤시·창호","간판·판넬","미장"],
  "감리원": ["현장감리","시공감리","건축감리","토목감리","소방감리"],
  "도시·조경설계": ["도시계획","가설설계","교량설계","경량·골조"],
  "환경기사": ["수질환경","대기환경","플랜트","환경측정","토양환경"],
  "공인중개사": ["부동산컨설팅","부동산개발","분양상담"],
  "분양매니저": ["부동산컨설팅","임대·임대컨설팅","부동산개발","분양상담","분양대행","매입·매각","경매입찰","주택관리사","시설점검"],
  "의사": ["전문의","전임의","치과의사"],
  "간호사": ["수술실간호사","병동간호사","전문간호사","응급실간호사","검진센터간호사","책임간호사","수간호사","마취간호사","연구간호사(CRC)"],
  "간호조무사": ["진료보조","수술실보조","보험심사·청구"],
  "약사·한약사": ["약사","RA","한약사"],
  "의료기사": ["치위생사","방사선사","물리치료사","임상병리사","작업치료사","치기공사"],
  "원무행정": ["접수·예약","원무","외래","보험심사·청구"],
  "기타의료종사자": ["RA","검안사","안경사","응급구조사","의공기사","언어치료사","보건의료정보관리사","심리치료사","재활치료사","청각사","청능사","운동처방사","놀이치료사","위생사","구급차기사","산후관리사","미술치료사","인지치료사","도수치료사","초음파사","의지보조기기사","음악치료사"],
  "의료·약무보조": ["진료보조","약무보조","의약사무","간병인"],
  "바이오·제약연구원": ["제약·바이오R&D","생명공학","의료기기연구","의약외품연구","미생물","건강식품연구"],
  "PD·감독": ["영상제작","방송기획","방송제작","방송송출·송신","편성","웹툰PD"],
  "포토그래퍼": ["촬영보조","촬영기자","영사기사"],
  "영상편집자": ["영상제작","방송제작","방송기획","인코딩","CG","특수효과","VJ"],
  "사운드엔지니어": ["음향","프로듀서","작사·작곡"],
  "스태프": ["촬영보조","방송제작","조명","음향","스크립터","특수효과","뮤지컬·연극","보조출연"],
  "출판·편집": ["출판기획","교정","인쇄·출력","제본","삽화·일러스트"],
  "배급·제작자": ["행사기획","공연기획","전시기획","영상제작","에이전트","방송기획","프로듀서","캐스팅","영화배급","영화기획","영화제작"],
  "크리에이터": ["영상제작","방송기획","방송제작"],
  "기자": ["취재기자","신문기자","편집기자","촬영기자","사진기자"],
  "작가": ["구성작가","방송작가","시나리오작가","대본","스크립터","번역작가","교정"],
  "아나운서": ["방송아나운서","사내방송","기상캐스트"],
  "리포터·성우": ["성우","리포터","더빙"],
  "MC·쇼호스트": ["쇼호스트","MC","VJ"],
  "연예인·매니저": ["로드매니저","캐스팅","연기자","가수","뮤지컬·연극"],
  "통번역사": ["영어","동시통역","기타외국어","일본어","관광통역","중국어","외화번역"],
  "음반기획": ["작사·작곡","프로듀서","가수","음향"],
  "스포츠강사": ["생활체육","피트니스센터","스포츠센터","레포츠","수영","골프","안전요원","필라테스","요가"],
  "사회복지사": ["장애인복지","노인복지","심리상담","생활복지","청소년복지","아동복지","자원봉사","재활교사"],
  "요양보호사": ["노인복지","생활복지","방문요양"],
  "환경미화원": ["청소·미화","환경관리","해충방제"],
  "보건관리자": ["산업안전","위험성평가","건설안전"],
  "사서": ["도서관리","문헌수집","사례관리"],
  "방역·방재기사": ["해충방제","소독","소방·방재"]
};




function JobCategorySelector() {
  const [main, setMain] = useState(null);
  const [sub, setSub] = useState(null);
  const [detail, setDetail] = useState(null);

  const handleFinalSelection = (jobRoleName) => {
    setDetail(jobRoleName);

    // ✅ 추가: 직무 값을 hidden input에 설정
    const inputRole = document.getElementById("filter-job-role");
    if (inputRole) inputRole.value = jobRoleName;

    fetch(`/api/occupations/id?jobRoleName=${encodeURIComponent(jobRoleName)}`)
        .then((res) => {
          if (!res.ok) throw new Error("조회 실패");
          return res.json();
        })
        .then((data) => {
          const input = document.getElementById("occupationId");
          if (input && data.id) {
            input.value = data.id; // DOM value 설정
            input.setAttribute("value", data.id); // HTML 속성 반영
            console.log("✅ 직무 선택 완료, ID:", data.id);
          }
        })
        .catch((err) => {
          console.error("❌ occupationId 설정 중 오류:", err);
        });
  };

  const colStyle = {
    width: "33%",
    maxHeight: "300px",
    overflowY: "auto",
    border: "1px solid #ccc",
    padding: "10px",
    backgroundColor: "#fff",
  };

  const labelStyle = {
    fontWeight: "bold",
    marginBottom: "8px",
    fontSize: "16px",
  };

  const renderList = (items, selected, setSelected) =>
      items.map((item) =>
          React.createElement(
              "div",
              {
                key: item,
                onClick: () => setSelected(item),
                style: {
                  cursor: "pointer",
                  padding: "8px",
                  backgroundColor: selected === item ? "#cce5ff" : "#f8f9fa",
                  borderRadius: "5px",
                  marginBottom: "5px",
                },
              },
              item
          )
      );

  return React.createElement(
      "div",
      { style: { display: "flex", gap: "10px" } },
      // 직군
      React.createElement("div", { style: colStyle }, [
        React.createElement("div", { key: "label1", style: labelStyle }, "직군"),
        ...renderList(Object.keys(jobData), main, (key) => {
          setMain(key);
          setSub(null);
          setDetail(null);

          // ✅ 추가: 직군 값을 hidden input에 설정
          const inputGroup = document.getElementById("filter-job-group");
          if (inputGroup) inputGroup.value = key;
        }),
      ]),
      // 직종
      React.createElement("div", { style: colStyle }, [
        React.createElement("div", { key: "label2", style: labelStyle }, "직종"),
        ...(main
            ? renderList(jobData[main], sub, (item) => {
              setSub(item);
              setDetail(null);

              // ✅ 추가: 직종 값을 hidden input에 설정
              const inputType = document.getElementById("filter-job-type");
              if (inputType) inputType.value = item;
            })
            : []),
      ]),
      // 직무
      React.createElement("div", { style: colStyle }, [
        React.createElement("div", { key: "label3", style: labelStyle }, "직무"),
        ...(sub && detailMap[sub]
            ? renderList(detailMap[sub], detail, handleFinalSelection)
            : []),
      ])
  );
}

const container = document.getElementById("react-job-category-selector");
const root = createRoot(container);
root.render(React.createElement(JobCategorySelector));

// ✅ 반드시 default export 해주세요 (import 시 사용됩니다!)
export default JobCategorySelector;
